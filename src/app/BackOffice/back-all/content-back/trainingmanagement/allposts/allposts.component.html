

<div class="container">
  <div class="row">
    <div class="col">
      <div class="titre-container">
        <h1 class="titre m-0">Post</h1>
      </div>
    </div>
  </div>
</div>

  <div class="col-12">
    <div class="card mb-3 mx-auto text-center" style="width: 800px; height: 150px;">


     
      <div class="row g-0">

        <p-toast></p-toast>
        <p-dataView #dv [value]="allPosts"  [paginator]="true" [rows]="4" layout="grid">
          <ng-template let-Post pTemplate="gridItem">
            <div class="col-12 md:col-4 mt-2 px-2">
              <div class="card-body" style="background-color:  #E8C4D0;">
                <div class="col-md-8">
                  <div class="container">
                    <div class="row">
                     
                      
                  
                    </div>
                  </div>
              <div class="card-body" style="background-color:  #E8C4D0;">
                <div class="col-md-8">
                  <div class="container">
                    <div class="row">
                     
                      
                  
                    </div>
                  </div>

                  <!-- Contenu de chaque poste -->
                  </div>

                  <div class="card" style="width: 40rem;">
                    <img [src]="src+Post.id" alt="Post Image" class="card-img-top" />
                    <div class="card-body">
                      <h1 class="card-title">{{Post.title}}</h1>
                      <p class="text-start">{{Post.description}}</p>
                      <div class="mt-6"> 
                      <p class="text-sm-end" style="color: #A8043C ;">{{Post.userName}}</p>
                      <p class="text-sm-end" style="color: #A8043C ;">{{Post.creationDate | date :'medium'}}</p>
                      </div>
                <div class="flex align-items-center justify-content-center mt-2">

                  <div class="flex align-items-center justify-content-center mt-2">
                    <button pButton pRipple icon="pi pi-thumbs-up" class="p-button-text" style="color: #A8043C ; border-color: pink;" (click)="like(Post.id)"></button>
                    <span class="ml-1" style="color: #A8043C  ;">{{ Post.likes }}</span>
                  </div>
                  
                  <div class="flex align-items-center justify-content-center mt-2">
                    <button pButton pRipple icon="pi pi-thumbs-down-fill" class="p-button-text" style="color: black; border-color: black;" (click)="dislike(Post.id)"></button>
                    <span class="ml-1">{{ Post.dislikes }}</span>
                  </div>
                  
                  </div>

                  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <div class="mt-3"> 
                      <div class="mt-3"> 
                      <button class="btn custom-btn-color me-md-2" type="button" (click)="showComments(Post.comments)" >Show Comments</button>
          
                      <button class="btn custom-btn-color" type="button" (click)="addComment(Post.id)"  >Add Comment </button>
                    </div>
                  </div>
                </div>
              </div>
                       </div>
 

    <p-dialog [(visible)]="descriptionDialog" header="Description" [modal]="true" [style]="{width:'450px'}">
      <div class="flex align-items-center justify-content-center">
        <span style="font-weight: bold">{{description}}</span>
      </div>
      <ng-template pTemplate="footer">
        <button pButton pRipple icon="pi pi-times" class="p-button-text" label="Close" (click)="descriptionDialog = false"></button>
      </ng-template>
    </p-dialog>

    <p-dialog [(visible)]="commentsDialog" [style]="{width: '600px'}" header="Comments" [closable]="false" [modal]="true" class="p-fluid">
      <ng-template pTemplate="content">
        <div *ngIf="comments.length > 0">
          <div class="card mb-0" style="height: 550px">
            <div class="mt-3 ml-2" style="height: 450px;overflow-y: auto;">
              <ul class="p-0 mx-0 mt-0 mb-4 list-none"   *ngFor="let y of comments">
                <li class="flex align-items-center py-2 double-border surface-border">
                  <div class="w-3rem h-3rem flex align-items-center justify-content-center bg-custom-color border-circle mr-3 flex-shrink-0">
                      <span>{{y.userName}}</span>
                  </div>
                  <span class="text-900 line-height-3">{{y.text}}</span>
                  <div class="ml-auto">
                      <span class="custom-text-color">{{y.creationDate |date:'dd-MM-yyyy'}}</span>
                  </div>
              </li>
              
              
              
              </ul>
            </div>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <button pButton label="Close" class="custom-button" (click)="commentsDialog=false"></button>
>


      </ng-template>
    </p-dialog>

    <p-dialog [(visible)]="addCommentDialog" [style]="{width: '450px', 'background-color': '#E8C4D0'}" header="AComment" [closable]="false" [modal]="true" class="p-fluid">
      <ng-template pTemplate="content">
        <div class="form-group">
          
          <input type="text" class="form-control" id="commentText" [(ngModel)]="newComment.text" required autofocus [ngClass]="{'is-invalid': submitted && !newComment.text}" style="background-color: #E8C4D0"/>
          <div class="invalid-feedback" *ngIf="submitted && !newComment.text">Text is required.</div>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <button type="button" class="btn btn-secondary" style="background-color: #8B0026; color: white;" (click)="addCommentDialog=false">Cancel</button>
        <button type="button" class="btn btn-primary" style="background-color: #8B0026; color: white;" (click)="createComment()">Save</button>
      </ng-template>
    </p-dialog>
    
    
    
    
    
  </div>
</div>


